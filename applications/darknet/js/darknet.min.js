var cur_cat;function showLoading(){$("#loadingModal").modal({escapeClose:!1,clickClose:!1,showClose:!1})}const view={};function openCategoryModal(t,e,n,a,i,o){if($("#sendBtn").unbind("click"),e){$("#nameInput").val(n),$("#imageInput").val(i),$("#descInput").val(a),$("#footerInput").val(o);var c=!1;$("#sendBtn").click(function(){c||(showLoading(),c=!0,$.post(window.location.href+"&service=edit_category",{id:e,name:$("#nameInput").val(),imageUrl:$("#imageInput").val(),description:$("#descInput").val(),footer:$("#footerInput").val()}).done(function(e){if(1==e.status){e=e.value;$(t).find("h4").first()[0].textContent=e.name,$(t).find("p").first()[0].innerHTML=e.description;var n=$(t).find("img").first();e.imageUrl&&0!==e.imageUrl.trim().lenght?(n.attr("src",e.imageUrl),n.show()):(n.attr("src",""),n.hide()),$(t).find("small").first()[0].textContent=e.footer}else toastr.error(e.reason);c=!1,$.modal.close()}))})}else{$("#nameInput").val(""),$("#imageInput").val(""),$("#descInput").val(""),$("#footerInput").val("");c=!1;$("#sendBtn").click(function(){c||(showLoading(),c=!0,$.post(window.location.href+"&service=new_category",{name:$("#nameInput").val(),imageUrl:$("#imageInput").val(),description:$("#descInput").val(),footer:$("#footerInput").val()}).done(function(t){if(1==t.status){t=t.value;view.AddCategory(document.getElementById("categoriesList"),t.id,t.name,t.description,t.imageUrl,t.footer,{},!0)}else toastr.error(t.reason);c=!1,$.modal.close()}))})}$("#categoryModal").modal()}function openArticleModal(t,e,n,a,i,o,c){if($("#artSendBtn").unbind("click"),e)$("#artNameInput").val(n),$("#artDescInput").val(a),$("#artImageInput").val(i),$("#artClassInput").val(o),$("#artPriceInput").val(c),$("#artSendBtn").click(function(){r||(showLoading(),r=!0,$.post(window.location.href+"&service=edit_article",{id:e,name:$("#artNameInput").val(),imageUrl:$("#artImageInput").val(),description:$("#artDescInput").val(),class:$("#artClassInput").val(),price:$("#artPriceInput").val()}).done(function(e){if(1==e.status){e=e.value;$(t).find("h4").first()[0].textContent=e.name,$(t).find("span").first()[0].textContent=e.price,$(t).find("p").first().next()[0].innerHTML=e.description,$(t).find("input").first().val(e.class);var n=$(t).find("img").first();e.imageUrl&&0!==e.imageUrl.trim().lenght?(n.attr("src",e.imageUrl),n.show()):(n.attr("src",""),n.hide())}else toastr.error(e.reason);r=!1,$.modal.close()}))});else{$("#artNameInput").val(""),$("#artDescInput").val(""),$("#artImageInput").val(""),$("#artClassInput").val(""),$("#artPriceInput").val("");var r=!1;$("#artSendBtn").click(function(){r||(showLoading(),r=!0,$.post(window.location.href+"&service=new_article",{name:$("#artNameInput").val(),imageUrl:$("#artImageInput").val(),description:$("#artDescInput").val(),class:$("#artClassInput").val(),category:cur_cat,price:$("#artPriceInput").val()}).done(function(t){if(1==t.status){t=t.value;view.AddArticle(document.getElementById("articlesList"),t.id,t.name,t.description,t.price,t.imageUrl,t.class,!0)}else toastr.error(t.reason);r=!1,$.modal.close()}))})}$("#articleModal").modal()}function openBuyModal(t,e,n){document.getElementById("itemPrice").textContent=n,document.getElementById("itemName").textContent=e,$("#buyBtn").unbind("click"),$("#buyBtn").click(function(){gmod.buy(t,$("#locationSelect").val(),e,n),$.modal.close()}),$("#buyModal").modal()}view.Notif=function(t,e){e?toastr.error(t):toastr.success(t)},view.PopulateCategory=function(t,e,n){var a=document.getElementById("articlesList");$(a).empty(),e.forEach(function(t){view.AddArticle(a,t.id,t.name,t.description,t.price,t.imageUrl,t.class,n)})},view.AddCategory=function(t,e,n,a,i,o,c,r){var l=document.createElement("div");l.className="card";var d=document.createElement("div");d.className="card-block",l.appendChild(d);var s=document.createElement("h4");s.className="card-title",s.textContent=n,d.appendChild(s);var m=document.createElement("p");m.className="card-text",m.innerHTML=a,d.appendChild(m);var u=document.createElement("button");u.type="button",u.className="btn btn-secondary",u.onclick=function(){$("#categoriesContainer").hide(),$("#articlesContainer").show(),cur_cat=e,view.PopulateCategory(n,c,r)},u.setAttribute("cc-lang","view"),d.appendChild(u);var p=document.createElement("img");p.className="card-img-bottom",i&&0!==i.trim().lenght?(p.src=i,$(p).show()):(p.src="",$(p).hide()),p.style.margin="10px 0px",l.appendChild(p);var v=document.createElement("div");v.className="card-footer",l.appendChild(v);var f=document.createElement("small");if(f.className="text-muted",f.textContent=o,v.appendChild(f),r){var g=document.createElement("div");g.classList.add("editContainer"),l.appendChild(g);var h=document.createElement("button");h.innerHTML='<i class="fas fa-trash-alt"></i>',h.classList.add("interactBtn");var C=!1;h.onclick=function(){C||(showLoading(),C=!0,$.post(window.location.href+"&service=rem_category",{id:e}).done(function(t){1==t.status?$(l).fadeOut(200,function(){$(this).remove()}):toastr.error(t.reason),C=!1,$.modal.close()}))},g.appendChild(h),(r=document.createElement("button")).innerHTML='<i class="fas fa-edit"></i>',r.classList.add("interactBtn"),r.onclick=function(){openCategoryModal(l,e,s.textContent,m.innerHTML,$(p).attr("src"),f.textContent)},g.appendChild(r)}t.appendChild(l),"undefined"!=typeof gmod&&"updateLang"in gmod&&gmod.updateLang()},view.AddArticle=function(t,e,n,a,i,o,c,r){var l=document.createElement("div");l.className="jumbotron content";var d=document.createElement("img");o&&0!==o.trim().lenght?(d.src=o,$(d).show()):(d.src="",$(d).hide()),d.align="left",d.style.paddingRight="5px",l.appendChild(d);var s=document.createElement("input");s.setAttribute("type","hidden"),$(s).val(c),l.appendChild(s);var m=document.createElement("h4");m.className="title textcontent",m.textContent=n,l.appendChild(m);var u=document.createElement("p");u.className="textcontent",l.appendChild(u);var p=document.createElement("strong");p.setAttribute("cc-lang","price:"),u.appendChild(p);var v=document.createElement("span");v.textContent=i,u.appendChild(v);var f=document.createElement("p");f.className="textcontent",f.innerHTML=a,l.appendChild(f);var g=document.createElement("button");if(g.type="button",g.className="btn btn-secondary",g.onclick=function(){openBuyModal(e,n,i)},g.setAttribute("cc-lang","buy"),l.appendChild(g),r){var h=document.createElement("div");h.classList.add("editContainer"),l.appendChild(h);var C=document.createElement("button");C.innerHTML='<i class="fas fa-trash-alt"></i>',C.classList.add("interactBtn");var I=!1;C.onclick=function(){I||(showLoading(),I=!0,$.post(window.location.href+"&service=rem_article",{id:e}).done(function(t){1==t.status?$(l).fadeOut(200,function(){$(this).remove()}):toastr.error(t.reason),I=!1,$.modal.close()}))},h.appendChild(C),(r=document.createElement("button")).innerHTML='<i class="fas fa-edit"></i>',r.classList.add("interactBtn"),r.onclick=function(){openArticleModal(l,e,m.textContent,f.innerHTML,$(d).attr("src"),$(s).val(),v.textContent)},h.appendChild(r)}t.appendChild(l),"undefined"!=typeof gmod&&"updateLang"in gmod&&gmod.updateLang()},view.AddLocation=function(t){const e=document.createElement("option");e.textContent=t,e.setAttribute("value",t),$("#locationSelect").append(e)},$(document).ready(function(){$("#newCatBtn").click(function(){openCategoryModal()}),$("#newArticleBtn").click(function(){openArticleModal()}),$("#backBtn").click(function(){$("#categoriesContainer").show(),$("#articlesContainer").hide()})});